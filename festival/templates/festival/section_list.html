{% extends 'festival/base.html' %}
{% load i18n %}

{% block content %}
    {{ block.super }}
    {% for section in object_list %}
    <section id="id-{% if request.LANGUAGE_CODE == 'en' %}{{ section.slug_en }}{% else %}{{ section.slug }}{% endif %}">
        <div class="page_width">{% if section.auto_headline %}
            <h1>{% if request.LANGUAGE_CODE == 'en' %}{{ section.headline_en }}{% else %}{{ section.headline }}{% endif %}</h1>{% endif %}{% if section.widget %}
            {% include section.get_widget.template_name with widget_context=section.widget_context %}{% endif %}
            <div class="text">{% if request.LANGUAGE_CODE == 'en' %}{{ section.full_text_en|safe }}{% else %}{{ section.full_text|safe }}{% endif %}</div>
        </div>{% if request.LANGUAGE_CODE == 'en' and section.extra_full_text_en %}
        <div id="{{ section.slug_en }}-extra_text" class="extra_text hidden_extra">
            <div class="page_width text">{{ section.extra_full_text_en|safe }}</div>
        </div>
        <div class="button"><div id="{{ section.slug_en }}-button" class="extra_button">{% trans 'chceš vědět víc?' %}</div></div>{% elif request.LANGUAGE_CODE == 'cs' and section.extra_full_text %}
        <div id="{{ section.slug_en }}-extra_text" class="extra_text hidden_extra">
            <div class="page_width text">{{ section.extra_full_text|safe }}</div>
        </div>
        <div class="button"><div id="{{ section.slug_en }}-button" class="extra_button">{% trans 'chceš vědět víc?' %}</div></div>{% endif %}
    </section>
    {% endfor %}
{% endblock %}

{% block js %}
    <script>
$(function(){{% if not view.home %}
    $('body').removeClass('first_time');{% endif %}
    $('#logo').on('click', function () {
        $('body').addClass('first_time');
        $('nav').addClass('hidden');
        $('#logo').removeClass('nav_on');
        $('#menu_button').removeClass('cross');
    });
    $('.extra_button').on('click', function () {
        var $text = $('#' + $(this).attr('id').replace('-button', '-extra_text'));
        if ($text.hasClass('hidden_extra')){
            $text.removeClass('hidden_extra');
            $(this).html("{% trans 'chceš vědět míň?' %}");
        } else {
            $text.addClass('hidden_extra');
            readyToScroll = false;
            scrollToPage(200);
            $(this).html("{% trans 'chceš vědět víc?' %}");
        }
    });
})
    </script>
{% endblock %}